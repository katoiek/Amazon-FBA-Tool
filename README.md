# Amazon FBA 売上分析ダッシュボード

Amazon FBAの売上データCSVファイルを解析し、詳細な分析結果をダッシュボードで表示するWebアプリケーションです。

## 機能

### 📊 売上分析
- **総売上・利益・注文件数・手数料の一覧表示**
- **SKU別詳細分析** - 各商品の以下データを表示：
  - 売上額・利益額
  - 販売数・返品数
  - 返品額
  - FBA手数料・Amazon手数料
  - 利益率
- **月別売上推移グラフ** - 売上と利益の時系列変化

### 💰 費用分析
- **費用内訳** - 以下の項目別に分析
  1. Amazon手数料
  2. 広告費
  3. 返品額
  4. FBA保管料手数料
  5. その他の手数料

### 📈 ダッシュボード機能
- **リアルタイム分析** - CSVファイルアップロード後即座に結果表示
- **レスポンシブデザイン** - PC・タブレット・スマートフォン対応
- **詳細SKU分析** - 売上、返品額、販売数、返品数、手数料の詳細表示
- **全SKU表示** - 上位10商品と全商品の切り替え表示

## 技術スタック

- **フロントエンド**: TypeScript, HTML5, CSS3, Chart.js
- **バックエンド**: Hono (Node.js/Cloudflare Workers)
- **セキュリティ**: CSP, XSS Protection, CSRF対策
- **デプロイ**: Cloudflare Workers (将来対応)
- **開発環境**: TypeScript, TSX

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで http://localhost:3000 を開いてアプリケーションにアクセスできます。

### 3. Cloudflare Workers開発環境（オプション）

```bash
npm run dev:cloudflare
```

## 使用方法

### CSVファイルのアップロード

1. **ファイル選択**: 「ファイルを選択」ボタンをクリックして Amazon FBA の取引CSVファイルを選択
2. **ドラッグ&ドロップ**: ファイルを直接アップロード領域にドロップ
3. **分析開始**: 「分析開始」ボタンをクリック

## CSVファイル形式

Amazon セラーセントラルからダウンロードできる「カスタム取引レポート」のCSVファイルに対応しています。

必要なカラム：
- 日付/時間
- トランザクションの種類
- SKU
- 説明
- 商品売上
- 手数料
- FBA 手数料
- その他
- 合計

## プロジェクト構成

```
Amazon-FBA-Tool/
├── src/
│   ├── index.ts          # メインアプリケーション（Hono）
│   ├── dev-server.ts     # 開発サーバー
│   ├── types.ts          # TypeScript型定義
│   └── utils/
│       └── csvParser.ts  # CSV解析ユーティリティ
├── Data/                 # サンプルCSVデータ
├── package.json
├── tsconfig.json
├── wrangler.toml         # Cloudflare Workers設定
└── README.md
```

## 開発

### ローカル開発

```bash
# 開発サーバー起動
npm run dev

# TypeScriptコンパイル
npm run build
```

### Cloudflare Workers デプロイ

```bash
# プロダクションビルド
npm run build

# Cloudflare Workers にデプロイ
npm run deploy
```

## 分析データの詳細

### SKU別分析
- **売上**: 商品別の総売上金額
- **利益**: 手数料等を差し引いた純利益
- **数量**: 販売数量
- **平均単価**: 売上 ÷ 数量
- **利益率**: (利益 ÷ 売上) × 100

### 費用分析
- **Amazon手数料**: 販売手数料、成約料等
- **広告費**: Amazon広告費用
- **返品額**: 返金処理による損失
- **FBA保管料**: 在庫保管に関する手数料
- **その他**: 廃棄手数料など

## ライセンス

MIT License

## 貢献

プルリクエストや Issue の投稿を歓迎しています。

## セキュリティ

### データ保護
- **ローカル処理**: CSVファイルはサーバー側でのみ処理され、保存されません
- **セキュリティヘッダー**: XSS、CSRF、クリックジャッキング対策を実装
- **CSP**: Content Security Policyによる外部リソースの制限
- **データ暗号化**: HTTPS通信の必須化

### 注意事項
- 実際の取引データを含むCSVファイルをGitリポジトリにコミットしないでください
- 本番環境では適切な認証・認可機能の追加を推奨します

## サポート

質問やバグ報告は GitHub Issues をご利用ください。
